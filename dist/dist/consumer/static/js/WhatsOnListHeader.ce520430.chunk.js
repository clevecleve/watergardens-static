"use strict";(self.webpackChunkconsumer=self.webpackChunkconsumer||[]).push([[9252],{5181:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s(69499),r=s(98558),n=s(93990),l=s(14729),a=s(61995);class o extends i.Component{constructor(e){super(e),this.state={selectedCategory:""}}componentDidMount(){this.setState({selectedCategory:this.getUrlParameter("filter_cat")})}updateMainFilter(e){const t=this.props.sitecoreContext;n.A.setSitecoreContext({...t,whatsOnMainFilter:e,refresh:!0}),this.setState({selectedCategory:e})}componentDidUpdate(e){this.props.sitecoreContext&&this.props.sitecoreContext.whatsOnMainFilter&&e.sitecoreContext.whatsOnMainFilter!==this.props.sitecoreContext.whatsOnMainFilter&&this.setState({selectedCategory:this.props.sitecoreContext.whatsOnMainFilter})}getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}render(){const{WhatsOnListHeadline:e,PromotionFilter:t}=this.props.fields,{selectedCategory:s}=this.state,i=s||(this.props.sitecoreContext.whatsOnMainFilter?this.props.sitecoreContext.whatsOnMainFilter:"all");return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"whatson-list-header-container",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"header-wrapper",children:(0,a.jsx)("h1",{className:"header-title",children:e.value&&(0,a.jsx)(r.Text,{field:e})})})})}),(0,a.jsx)(l.A,{tabs:t,hasAllTab:!0,allTabQuery:"all",defaultName:"Name",defaultFilter:"FilterValue",selected:i,updateFilter:e=>this.updateMainFilter(e)})]})}}const c=(0,r.withSitecoreContext)()(o)},14729:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(69499);var r=s(61995);class n extends i.Component{constructor(){super(...arguments),this.renderAllTab=(e,t,s)=>(0,r.jsx)("li",{name:"listAll",className:"tab "+(""===e||e&&"all"===e.toLowerCase()?"selected":""),onClick:()=>t(s),children:(0,r.jsx)("div",{children:"All"})}),this.redirectPage=e=>{"undefined"!==typeof window&&(window.location.href=e.href)}}componentDidMount(){this.setupResizeHandler(),setTimeout(()=>{this.navigationResize()},500)}componentWillUnmount(){this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler)}setupResizeHandler(){this._resizeHandler=()=>this.navigationResize(),window.addEventListener("resize",this._resizeHandler)}navigationResize(){const e=document.getElementById("nav");if(!e)return;const t=e.querySelector("li.more");if(!t)return;const s=t.querySelector("#overflow");if(!s)return;for(;s.firstChild;)e.insertBefore(s.firstChild,t);const i=window.innerWidth,r=e=>e.getBoundingClientRect().width;let n=Array.from(e.children).filter(e=>"LI"===e.tagName&&!e.classList.contains("more"));const l=r(t);let a=l;const o=r(e)-l;n.forEach((e,t)=>{const s=r(e)+40;a+=s}),t.style.display=a>o&&i>991?"":"none";for(;a>o;){const e=n[n.length-1];if(!e)break;const t=r(e)+40;if(a-=t,!(i>991))break;s.insertBefore(e,s.firstChild),n.pop()}if(s.children.length){const i=t.getBoundingClientRect().left+window.pageXOffset+l-s.getBoundingClientRect().width+((s.offsetParent||e).getBoundingClientRect().left+window.pageXOffset);s.style.left=i+"px"}}render(){const{selected:e,updateFilter:t,hasAllTab:s,allTabQuery:i,defaultName:n,defaultFilter:l,defaultActive:a,className:o}=this.props||{};let{tabs:c}=this.props||{};return c&&c.length?(c=((e,t,s,i)=>{let r=[];return e.forEach(e=>r.push({name:e.fields[t].value,filter:e.fields[s].value,active:i?e.fields[i].value:null})),r})(c,n,l,a),(0,r.jsx)("div",{className:`header-sub-nav-wrapper ${o||""}`,children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("ul",{id:"nav",children:[s&&this.renderAllTab(e,t,i),c.map((i,n)=>{const{name:l=null,filter:a=null,active:o=null}=i||{},c=e&&a&&e.toLowerCase()===a.toLowerCase()||o&&"true"===o;return(0,r.jsx)("li",{className:c?"selected":"",onClick:()=>{s?t(a):this.redirectPage(a)},children:(0,r.jsx)("div",{children:l})},`secondarynavID-${n}`)}),(0,r.jsxs)("li",{className:"more",children:[(0,r.jsx)("div",{children:"More \xbb"}),(0,r.jsx)("ul",{id:"overflow"})]})]})})})):null}}const l=n}}]);
//# sourceMappingURL=WhatsOnListHeader.ce520430.chunk.js.map