"use strict";(self.webpackChunkconsumer=self.webpackChunkconsumer||[]).push([[4249,6813],{11501:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(69499),a=s(61995);class l extends i.Component{constructor(){super(...arguments),this.setMargin=()=>("standard"===this.props.margin?this.margin="standard-margin":"small"===this.props.margin?this.margin="small-margin":"custom"===this.props.margin?this.margin="custom-margin":"campaign"===this.props.margin?this.margin="campaign-margin":this.margin="",this.margin)}render(){return(0,a.jsx)("div",{className:`base-component ${this.setMargin()} ${this.props.className}`,children:this.props.children})}}const c=l},14729:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(69499);var a=s(61995);class l extends i.Component{constructor(){super(...arguments),this.renderAllTab=(e,t,s)=>(0,a.jsx)("li",{name:"listAll",className:"tab "+(""===e||e&&"all"===e.toLowerCase()?"selected":""),onClick:()=>t(s),children:(0,a.jsx)("div",{children:"All"})}),this.redirectPage=e=>{"undefined"!==typeof window&&(window.location.href=e.href)}}componentDidMount(){this.setupResizeHandler(),setTimeout(()=>{this.navigationResize()},500)}componentWillUnmount(){this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler)}setupResizeHandler(){this._resizeHandler=()=>this.navigationResize(),window.addEventListener("resize",this._resizeHandler)}navigationResize(){const e=document.getElementById("nav");if(!e)return;const t=e.querySelector("li.more");if(!t)return;const s=t.querySelector("#overflow");if(!s)return;for(;s.firstChild;)e.insertBefore(s.firstChild,t);const i=window.innerWidth,a=e=>e.getBoundingClientRect().width;let l=Array.from(e.children).filter(e=>"LI"===e.tagName&&!e.classList.contains("more"));const c=a(t);let n=c;const r=a(e)-c;l.forEach((e,t)=>{const s=a(e)+40;n+=s}),t.style.display=n>r&&i>991?"":"none";for(;n>r;){const e=l[l.length-1];if(!e)break;const t=a(e)+40;if(n-=t,!(i>991))break;s.insertBefore(e,s.firstChild),l.pop()}if(s.children.length){const i=t.getBoundingClientRect().left+window.pageXOffset+c-s.getBoundingClientRect().width+((s.offsetParent||e).getBoundingClientRect().left+window.pageXOffset);s.style.left=i+"px"}}render(){const{selected:e,updateFilter:t,hasAllTab:s,allTabQuery:i,defaultName:l,defaultFilter:c,defaultActive:n,className:r}=this.props||{};let{tabs:g}=this.props||{};return g&&g.length?(g=((e,t,s,i)=>{let a=[];return e.forEach(e=>a.push({name:e.fields[t].value,filter:e.fields[s].value,active:i?e.fields[i].value:null})),a})(g,l,c,n),(0,a.jsx)("div",{className:`header-sub-nav-wrapper ${r||""}`,children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("ul",{id:"nav",children:[s&&this.renderAllTab(e,t,i),g.map((i,l)=>{const{name:c=null,filter:n=null,active:r=null}=i||{},g=e&&n&&e.toLowerCase()===n.toLowerCase()||r&&"true"===r;return(0,a.jsx)("li",{className:g?"selected":"",onClick:()=>{s?t(n):this.redirectPage(n)},children:(0,a.jsx)("div",{children:c})},`secondarynavID-${l}`)}),(0,a.jsxs)("li",{className:"more",children:[(0,a.jsx)("div",{children:"More \xbb"}),(0,a.jsx)("ul",{id:"overflow"})]})]})})})):null}}const c=l},24827:(e,t,s)=>{s.d(t,{A:()=>a});s(69499);var i=s(61995);const a=()=>(0,i.jsx)("div",{className:"loader-wrapper",children:(0,i.jsx)("div",{className:"loader"})})},48666:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAIAAABEtEjdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAawSURBVHhe7dQBDQAADMOg+5c6FffRgAhuAOTIHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgfI2R5jTYfLh3foSgAAAABJRU5ErkJggg=="},49055:(e,t,s)=>{s.d(t,{q:()=>i});const i=(e,t,s)=>{let i,a=0;return s?(window&&window.outerWidth&&window.outerWidth<768?a=6:i=window&&window.outerWidth&&window.outerWidth<=768&&window.outerWidth<992&&s?e%s:e%t,1==i?a=6:2==i?a=8:3==i?a=10:4==i&&(a=12)):(i=e%t,1==i?a=6:2==i?a=8:3==i?a=10:4==i&&(a=12)),a}},52327:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s(69499),a=s(61995);class l extends i.Component{constructor(e){super(e),this.handleScroll=()=>{const e=document.querySelectorAll(".animation-rise-and-fade");if(e)for(let t=0;t<e.length;t++){let s=e[t],i=s.getBoundingClientRect(),a=window.innerHeight>=i.top,l=s.style.transform.split(/\w+\(|\);?/)[1].split("%")[0],c=0;l>0?a&&(l-=1,c+=.3):(l=0,c=1),s.style.transform=`translateY(${l}%)`,s.style.opacity=c}}}componentDidMount(){window&&window.addEventListener("scroll",this.handleScroll)}render(){const{position:e}=this.props||{};let t,s;return s=isNaN(e)?0:e,t={transform:`translateY(${s}%)`},(0,a.jsx)("div",{className:"animation-rise-and-fade",style:t,children:this.props.children})}}const c=l},66243:(e,t,s)=>{s.d(t,{A:()=>l});s(69499);var i=s(98558),a=s(61995);const l=e=>{const{iconValue:t=null,linkUrl:s=null,linkName:l=null,size:c=16,mapInfo:n=null,noLocation:r=!1,withViewOnMap:g=!1}=e;return t&&l&&l.value?(0,a.jsxs)("div",{className:"details-wrapper",children:[(0,a.jsx)("i",{className:`icon icon-${t} mr-1 mr-md-2`,style:{fontSize:c+"px"}}),s&&s.length&&r?(0,a.jsx)("a",{href:s,children:(0,a.jsx)(i.Text,{field:l})}):s&&s.length&&g?(0,a.jsxs)("div",{className:"separated-location",children:[(0,a.jsx)("span",{children:(0,a.jsx)(i.Text,{field:l})}),(0,a.jsx)("a",{href:s+"#/profile?location="+n,children:"View on map"})]}):s&&s.length?(0,a.jsx)("a",{href:s+"#/profile?location="+n,children:(0,a.jsx)(i.Text,{field:l})}):(0,a.jsx)(i.Text,{field:l})]}):null}},83236:(e,t,s)=>{s.d(t,{A:()=>B});var i=s(69499),a=s(98558),l=s(66243),c=s(48666),n=s(52327),r=s(33590),g=s.n(r),o=s(61995);class d extends i.Component{constructor(e){super(e),this.handleClickBrauzBtn=e=>{window.Brauz_open_book_a_stylist_dialog_with_selected_store(e)}}textFieldToUppercase(e){return{value:e.value.toUpperCase()}}categoryHandler(e){this.props.categoryMainHandler(e)}render(){const{category:e,name:t,nameLink:s,location:r,locationLink:d,itemId:B,openTime:u,thumbnail:h,logo:C,cookTime:w,serves:p,difficulty:A,rating:m,price:k,acceptsOnlineBooking:j,bookingIcon:I,bookingLabel:N,bookingUrl:v,hasBooking:f,index:x,position:T,retailerName:R,isRetailerContent:S,isLogoAsThumbnail:E,thumbnailAltText:H,pageType:O,retailerId:Q}=this.props,J=(0,o.jsxs)("div",{className:"icons",children:[(()=>{let e=[],t=[],s=[];if(m&&m.value){const t=parseInt(m.value);for(let s=1;s<=5;s++)s<=t?e.push((0,o.jsx)("div",{className:"icon icon-star checked"},s)):e.push((0,o.jsx)("div",{className:"icon icon-star"},s))}if(k&&k.value){const e=parseInt(k.value);if(e<=1)t.push((0,o.jsx)("i",{className:"icon icon-dollar"},"priceLevelId1"));else if(2===e||3===e)for(let s=0;s<2;s++)t.push((0,o.jsx)("i",{className:"icon icon-dollar"},"priceLevelId"+s));else if(e>=4)for(let s=0;s<3;s++)t.push((0,o.jsx)("i",{className:"icon icon-dollar"},"priceLevelId"+s))}else t="";return s=e.length||t?(0,o.jsxs)("div",{className:"storerating",children:[(0,o.jsx)("div",{className:"star",children:e}),(0,o.jsx)("div",{className:"dollar",children:(0,o.jsx)("div",{className:"pricelevel",children:(0,o.jsx)("span",{children:t})})})]}):"",s})(),r&&r.value&&(0,o.jsx)(l.A,{iconValue:"location mr-2",linkUrl:d&&d.value,linkName:r,mapInfo:Q&&Q.value?Q.value:"",size:"24"}),u&&u.value&&(0,o.jsx)(l.A,{iconValue:"time mr-2",linkName:u,size:"24"}),w&&w.value&&(0,o.jsx)(l.A,{iconValue:"timer",linkName:w,size:"24"}),p&&p.value&&(0,o.jsx)(l.A,{iconValue:"users",linkName:p,size:"24"}),A&&A.value&&(0,o.jsx)(l.A,{iconValue:"chef-2",linkName:A,size:"24"}),j&&j.value&&(0,o.jsxs)("div",{className:"details-wrapper",children:[I&&I.value?(0,o.jsx)("i",{className:`icon icon-${I.value} mr-2`,style:{fontSize:"24px"}}):(0,o.jsx)("i",{className:"icon icon-calendar-2 mr-2",style:{fontSize:"24px"}}),(0,o.jsx)("div",{className:"text-block",children:f&&f.value?(0,o.jsx)("button",{className:"brauz",onClick:()=>this.handleClickBrauzBtn(B.value),children:(0,o.jsx)(a.Text,{field:N})}):v&&v.value?(0,o.jsx)("a",{href:v.value,target:"_blank",children:(0,o.jsx)(a.Text,{field:N})}):(0,o.jsx)(a.Text,{field:N})})]})]});return(0,o.jsx)("div",{className:"col-12 col-md-4 col-lg-3",onClick:()=>g().dataLayer({dataLayer:{event:"lifestyleClick",lifestyle_page_type:O.value,lifestyle_title:t.value},dataLayerName:"dataLayer"}),children:(0,o.jsxs)(n.default,{position:T,children:[(0,o.jsxs)("div",{className:"animation-range",children:[(0,o.jsx)("div",{className:"image-wrapper  "+(E&&E.value?"display_retailer_logo":""),children:(0,o.jsxs)("a",{href:s&&s.value?s.value:"",className:"name",children:[h&&h.value&&h.value.src?(0,o.jsx)("div",{className:"include_logo_padding",children:(0,o.jsx)(a.Image,{media:{...h.value,src:c},"data-src":h.value.src,className:"tile-image lazyload"})}):(0,o.jsxs)(i.Fragment,{children:[S&&S.value&&(0,o.jsx)("div",{className:"display_retailer_name",children:(0,o.jsx)(a.Text,{field:R})}),(0,o.jsx)("div",{className:"no-image"})]}),B&&B.value&&(C&&C.value&&C.value.src?(0,o.jsx)("div",{className:"tile-logo-wrapper",children:(0,o.jsx)(a.Image,{media:{...C.value,src:c},"data-src":C.value.src,className:"tile-logo lazyload"})}):(0,o.jsx)("div",{className:"no-logo",children:(0,o.jsx)(a.Text,{field:t})}))]})}),O&&O.value?(0,o.jsxs)("div",{className:"title",children:[(0,o.jsxs)("div",{className:"page-type",children:[(0,o.jsx)("div",{className:"pagetype-rectangle"}),(0,o.jsx)(a.Text,{field:O})]}),(0,o.jsx)("div",{className:"name",children:(0,o.jsx)("a",{href:s&&s.value?s.value:"",children:(0,o.jsx)(a.Text,{field:t})})})]}):(0,o.jsxs)("div",{className:"title",children:[e&&e.value&&(0,o.jsx)("div",{className:"category",children:(0,o.jsx)("a",{onClick:()=>this.categoryHandler(e),children:(0,o.jsx)(a.Text,{field:this.textFieldToUppercase(e)})})}),(0,o.jsx)("div",{className:"name",children:(0,o.jsx)("a",{href:s&&s.value?s.value:"",children:(0,o.jsx)(a.Text,{field:t})})}),J]})]}),J]})},t.value+x)}}const B=d},92601:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var i=s(69499),a=s(98558),l=s(11501),c=s(83236),n=(s(48666),s(43210)),r=s.n(n),g=s(363),o=s.n(g),d=s(24827),B=s(49055),u=s(14729),h=s(61995);class C extends i.Component{constructor(e){super(e),this.getRecipeList=async(e,t)=>{const{pageId:s,dbName:i,pageSize:a,filter_tag:l,filter_occasion:c}=this.state.recipeListData,n={pageId:s,dbName:i,pageNumber:e,pageSize:a,filter_tag:l.toString(),filter_occasion:c};t?this.setState({isScrolling:!0}):this.setState({showLoader:!0});r()({url:"/api/sitecore/recipe/GetRecipes",method:"GET",params:n}).then(t=>{let s=t.data?t.data:null;if(s&&s.Recipes){const t=Math.ceil(s.TotalCount.value/12),i=e>1?this.state.recipeListing.concat(s.Recipes):s.Recipes,a=s.TotalCount&&s.TotalCount.value?s.TotalCount.value:0,l=s.Page&&s.Page.value?s.Page.value:1;this.setState({...this.state,recipeListing:i,totalCount:a,currentPage:l,hasMoreItems:l!=t})}this.setState({showLoader:!1,isScrolling:!1})}).catch(e=>{console.log(e),this.setState({showLoader:!1,isScrolling:!1})})},this.handleClickMeal=e=>{const{filter_occasion:t}=this.state.recipeListData;t!=e&&this.setState({recipeListData:{...this.state.recipeListData,filter_occasion:e},currentPage:1},()=>this.getRecipeList(1))},this.handleClickTaste=e=>{const t=e.target,s=t.id;let i=this.state.recipeListData.filter_tag;/is-active/.test(t.classList.value)?i=i.filter(function(e){return s.indexOf(e)<0}):i.push(s),this.setState({recipeListData:{...this.state.recipeListData,filter_tag:i},currentPage:1},()=>this.getRecipeList(1)),t.classList.toggle("is-active")},this.state={recipeListData:{pageId:"",dbName:"",pageSize:1,filter_tag:[],filter_occasion:""},recipeListing:[],currentPage:1,totalCount:0,showLoader:!0,isScrolling:!1,hasMoreItems:!0}}componentDidMount(){let e=window.document.getElementsByName("ContextItem")[0],t=e.value,s=e.dataset.targetDb,i="",a="";i=this.getUrlParameter("filter_tag"),a=this.getUrlParameter("filter_occasion");let l=[];""!==i&&(l=i.split(",")),this.setState({...this.state,recipeListData:{pageId:t,dbName:s,pageSize:12,filter_tag:l,filter_occasion:a}},()=>this.getRecipeList(1))}getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),s=window&&window.location&&window.location.search?t.exec(window.location.search):null;return null===s?"":decodeURIComponent(s[1].replace(/\+/g," "))}loadRecipeList(){this.getRecipeList(this.state.currentPage+1,!0)}renderMeals(e){const{filter_occasion:t}=this.state.recipeListData;return(0,h.jsx)(u.A,{tabs:e,hasAllTab:!0,allTabQuery:"",defaultName:"Name",defaultFilter:"Id",selected:t,updateFilter:e=>this.handleClickMeal(e)})}renderTaste(e){const{filter_tag:t}=this.state.recipeListData;return(0,h.jsxs)("div",{className:"recipe-listing__taste",children:[(0,h.jsx)("div",{className:"recipe-listing__taste--label",children:"Filter by:"}),(0,h.jsx)("ul",{className:"recipe-listing__taste--filter",children:e.map((e,s)=>{const{Name:i=null,Id:l=null}=e.fields;let c="";return t.length>0&&t.forEach(function(e,t){e==l.value&&(c="is-active")}),(0,h.jsx)("li",{className:`recipe-listing__taste--filter-list ${c}`,id:l&&l.value?l.value:"",onClick:this.handleClickTaste,children:(0,h.jsx)(a.Text,{field:i})},`taste-${l.value}-${s}`)})})]})}renderRecipes(e){const{NoResultsText:t}=this.props.fields||{};let s;return s=e&&e.length>0?(0,h.jsx)("div",{className:"content-tile-list-wrapper",children:(0,h.jsx)("div",{className:"row",children:e.map((e,t)=>{const{RecipeTitle:s=null,Thumbnail:i=null,CookTime:a=null,Serves:l=null,Difficulty:n=null,RecipeLink:r=null}=e;return(0,h.jsx)(c.A,{index:!0,name:s,nameLink:r,thumbnail:i,cookTime:a,serves:l,difficulty:n,position:(0,B.q)(t,4,3)})})})}):(0,h.jsx)("div",{className:"recipe-listing__content--noresult",children:t&&t.value?(0,h.jsx)(a.Text,{field:t}):"No result. Please try again."}),s}render(){const{Occasions:e=[],Tags:t=[]}=this.props.fields||{},{RemoveDefaultMargin:s=""}=this.props.params||{},{ApplySmallMargin:i=""}=this.props.params||{},a=s&&"1"===s?"":i&&"1"===i?"small":"standard",{showLoader:c,isScrolling:n,recipeListing:r}=this.state;return(0,h.jsx)("div",{className:"recipe-listing font-regular",children:(0,h.jsxs)(l.A,{margin:a,children:[e&&e.length>0&&this.renderMeals(e),(0,h.jsxs)("div",{className:"container",children:[t&&t.length>0&&this.renderTaste(t),(0,h.jsx)(o(),{style:{height:"auto",overflow:"auto"},dataLength:r.length,next:this.loadRecipeList.bind(this),hasMore:this.state.hasMoreItems,children:(0,h.jsxs)("div",{className:"recipe-listing__content--wrapper",children:[!c&&this.renderRecipes(r),(c||n)&&(0,h.jsx)(d.A,{})]})})]})]})})}}const w=C}}]);
//# sourceMappingURL=RecipeListingFilter.4acd9c6d.chunk.js.map