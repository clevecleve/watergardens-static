"use strict";(self.webpackChunkconsumer=self.webpackChunkconsumer||[]).push([[7113],{11501:(e,s,a)=>{a.d(s,{A:()=>c});var t=a(69499),r=a(61995);class l extends t.Component{constructor(){super(...arguments),this.setMargin=()=>("standard"===this.props.margin?this.margin="standard-margin":"small"===this.props.margin?this.margin="small-margin":"custom"===this.props.margin?this.margin="custom-margin":"campaign"===this.props.margin?this.margin="campaign-margin":this.margin="",this.margin)}render(){return(0,r.jsx)("div",{className:`base-component ${this.setMargin()} ${this.props.className}`,children:this.props.children})}}const c=l},48666:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAIAAABEtEjdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAawSURBVHhe7dQBDQAADMOg+5c6FffRgAhuAOTIHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgfI2R5jTYfLh3foSgAAAABJRU5ErkJggg=="},50682:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAalJREFUSA21lj1Ow0AQhZ8NBQ0ljYlQUBqukDMgYdG74QJIOQHiHkhu6FGQIq5CYxSFn4aShiaB95ZdbGuNvSHxSKPYuzPfm/X+JUKLvQCDFZBGwCnDRvTEhr/xt/gCZjEwHQAMbTbm+vZO0CdwzZ4LQnb8iLKFgCXf8j3g6gCQcM08gVfgjFXfErxfi+x4IeiDo8kOgftqKNtKewYuCb9bFy6CcpQrRkkEfkdgKxe8JloNDnkmcEXAuRuJEbDf/PE/lTeJ6nNxTk40J6ZaTWgI/IgjljdBq21i2UWCSEuRDXN662oRwMEX5pNXkf4zq1jSh7ucmJTdnXAf0d6igulpTBVtol5MbM3BqBf6D3QkAbf9+9BJzCrqg+yYEvDOD9e5hV+zD4pQ0ILLUx4az7giZvQsNIGr4kEeGi/2Ohttzo12zKSIB9oTRYZtQizEbLTYXhZ5W7DtS7jrx5ywMd95lnVaLjaFgN4PO3vqZVTjybGZicGlmbnbTcvUmD2/J5uI2NyJuwsEZlvder0yJSV1XRZUvqHrQm81xShWOdXKXRL7/rZt/G35BnXTd2DdYGr4AAAAAElFTkSuQmCC"},58749:(e,s,a)=>{a.d(s,{A:()=>c});var t=a(69499),r=a(50682),l=a(61995);const c=e=>{let{fields:s,fieldsStates:a={},fieldsLabels:c,setFields:i}=e;const g=(e,a)=>{let t,r="",l=s;((e,s)=>{let a=new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/),t=new RegExp(/^[a-z\xc0-\xff ,.'-]+$/i),r=new RegExp(/^[0-9]+$/),l=!0;return s&&(l="email"===e?a.test(String(s).toLowerCase()):"postcode"===e?s.length>4||4===s.length&&r.test(s):t.test(String(s).toLowerCase())),l})(e,a)||("email"===e?r="Please enter a valid email address":"postcode"===e?r="Please enter a valid postcode":"fname"===e?r="Please enter a valid first name":"lname"===e&&(r="Please enter a valid last name"),t=!0);for(let s=0;s<l.length;s++)l[s].name===e&&(l[s].error=t,l[s].message=r);i({fields:l})},n=e=>{const{FirstNameLabel:s,LastNameLabel:a,EmailLabel:t,PostcodeLabel:r}=c||{};let l="";switch(e){case"fname":l=s&&s.value?s.value:"First Name";break;case"lname":l=a&&a.value?a.value:"Last Name";break;case"email":l=t&&t.value?t.value:"Email";break;case"postcode":l=r&&r.value?r.value:"Postcode"}return l};return s.map((e,c)=>{const o={type:"text",id:e.name,name:e.name,className:"form-control form-control-lg"+(s[c].error?" box-error":""),required:!0,onChange:e=>{(e=>{g(e.target.name,e.target.value),i({[e.target.name]:e.target.value})})(e)},value:a[e.name]};return"postcode"===e.name&&(o.pattern="d",o.maxLength="4",o.onKeyUp=e=>{/[^0-9]+/.test(e.currentTarget.value)&&(e.currentTarget.value=e.currentTarget.value.replace(/[^0-9]*/g,""))},o.pattern="[0-9]*"),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{...o}),(0,l.jsx)("label",{className:"form-control-placeholder",htmlFor:e.name,children:n(e.name)}),s[c].error&&""!==s[c].message&&(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)("img",{src:r,className:"notify-indicator",alt:"notify-indicator"}),(0,l.jsx)("label",{className:(s[c].message?"text-message":"")+(s[c].error?" text-error":""),children:s[c].message})]})]},c)})}},68756:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var t=a(69499),r=a(98558),l=a(11501),c=a(43210),i=a.n(c),g=a(94551),n=a(9381),o=a(58749),m=a(61995);const B=e=>{let{image:s,details:a}=e;return(0,m.jsx)("div",{className:"subscribe-container",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-auto order-12 order-md-1 subscribe-content-wrapper",children:a}),(0,m.jsx)("div",{className:"col-12 col-md order-1 order-md-12 subscribe-image-wrapper",children:s})]})})},d=e=>{let{image:s,details:a}=e;return(0,m.jsxs)("div",{className:"subscribe-special-container",children:[(0,m.jsx)("div",{className:"subscribe-image",children:s}),(0,m.jsx)("div",{className:"subcribe-special-details",children:(0,m.jsx)("div",{className:"row no-gutters",children:(0,m.jsx)("div",{className:"col-12 col-md-7 col-xl-6 offset-md-4 offset-lg-5",children:a})})})]})};var u=a(50682);const A=e=>{let{subscribeProps:s,state:a,handleDetailsUpdate:l,subscribe:c}=e;const{SubscribeButton:i,SubscribeTitle:g,SubscribeDescription:n,EmailPlaceholder:o}=s,{isSpecial:B,message:d,error:A,email:C}=a;return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)("div",{className:"subscribe-header-wrapper",children:(0,m.jsx)(r.Text,{field:g})}),(0,m.jsx)("div",{className:"subscribe-description-wrapper",children:(0,m.jsx)(r.RichText,{field:n})}),(0,m.jsxs)("div",{className:"row subscribe",children:[(0,m.jsx)("div",{className:"col-12 subscribe-email col-md-8 "+(B?"col-lg-7 col-xl-8":""),children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("input",{type:"text",id:"subscribeEmail",className:"form-control form-control-lg"+(d?" box-message":"")+(A?" box-error":""),required:!0,onChange:e=>{(e=>{l({formData:{email:e.target.value},message:"",error:!1})})(e)},value:C}),(0,m.jsx)("label",{className:"form-control-placeholder",htmlFor:"subscribeEmail",children:o&&o.value}),A&&(0,m.jsx)("img",{src:u,className:"notify-indicator",alt:"notify-indicator"}),""!==d&&(0,m.jsx)("label",{className:(d?"text-message":"")+(A?" text-error":""),children:d})]})}),(0,m.jsx)("div",{className:"col-12 col-md-4",children:(0,m.jsx)("button",{className:"subscribe-button",onClick:()=>{c()},children:i&&i.value})})]})]})};var C=a(48666);const w=e=>{let{SubscribeImageUrl:s}=e;return s&&s.value?(0,m.jsx)("img",{alt:"subscribe",src:C,"data-src":s.value,className:"lazyload"}):""},p=e=>{let{isSpecial:s,subscribeProps:a,state:t,handleDetailsUpdate:r,subscribe:l,SubscribeImageUrl:c}=e;return s?(0,m.jsx)(d,{image:(0,m.jsx)(w,{SubscribeImageUrl:c}),details:(0,m.jsx)(A,{subscribeProps:a,state:t,handleDetailsUpdate:r,subscribe:l})}):(0,m.jsx)(B,{image:(0,m.jsx)(w,{SubscribeImageUrl:c}),details:(0,m.jsx)(A,{subscribeProps:a,state:t,handleDetailsUpdate:r,subscribe:l})})};class I extends t.Component{constructor(e){super(e),this.validateFormat=e=>new RegExp("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$").test(String(e).toLowerCase()),this.subscribe=async e=>{const{pageId:s,dbName:a,email:t}=this.state.formData,r={pageId:s,dbName:a,emailAddress:t};if(""!==this.state.formData.email)if(this.validateFormat(this.state.formData.email)){let e=await i()({method:"POST",url:"/api/sitecore/subscription/getuser",data:r});if(e&&e.data){let s,a,t=!1,r="";e.data.IsSuccessful?(s=!0,t=!0,document.getElementsByTagName("body")[0].classList.add("modal-open")):(a=!0,r=e.data.Message),this.setState({...this.state,message:r,error:a,success:s,modalOpen:t})}}else this.setState({...this.state,message:"Please enter a valid email address",error:!0,success:!1,modalOpen:!1});else this.setState({...this.state,message:"Please enter a valid email address",error:!0,success:!1})},this.handleEmailChange=e=>{let s="",a=!1;this.state.error&&!this.validateFormat(e.target.value)&&(s="Please enter a valid email address",a=!0),this.setState({...this.state,formData:{...this.state.formData,email:e.target.value},message:s,error:a})},this.handleDetailsUpdate=e=>{this.setState({...this.state,...e,formData:{...this.state.formData,...e.formData}})},this.handlePreferencesResponse=(e,s,a)=>{if(2===s.ApiResponse||5===s.ApiResponse){let t=5===s.ApiResponse?3:2,r=this.state.formData.fields;r[t].error=!0,r[t].message=s.Message,this.setState({...this.state,success:e,submitted:a,emailPrefResp:{...s},formData:{...this.state.formData,fields:r}})}else if(this.setState({formData:{...this.state.formData,email:"",fname:"",lname:"",postcode:""},success:e,submitted:a,emailPrefResp:{...s}}),e){const e=document.querySelector(".modal-wrapper");setTimeout(()=>{e.classList.remove("modal-active")},1e3),setTimeout(()=>{this.setState({modalOpen:!1}),document.getElementsByTagName("body")[0].classList.remove("modal-open")},1500)}},this.handleOnClose=e=>{this.setState({success:!1,modalOpen:!1,formData:{...this.state.formData,fname:"",lname:"",postcode:"",fields:[{name:"fname",error:!1,message:""},{name:"lname",error:!1,message:""},{name:"email",error:!1,message:""},{name:"postcode",error:!1,message:""}]}}),document.getElementsByTagName("body")[0].classList.remove("modal-open")},this.updateFieldsState=e=>{this.setState({...this.state,formData:{...this.state.formData,...e}})},this.state={formData:{pageId:"",dbName:"",fname:"",lname:"",postcode:"",email:"",fields:[{name:"fname",error:!1,message:""},{name:"lname",error:!1,message:""},{name:"email",error:!1,message:""},{name:"postcode",error:!1,message:""}]},emailPrefResp:{IsSuccessful:!1,Message:"",ApiResponse:null},message:"",error:!1,success:!1,modalOpen:!1}}componentDidMount(){let e=window.document.getElementsByName("ContextItem")[0],s=e.value,a=e.dataset.targetDb;this.setState({...this.state,formData:{...this.state.formData,pageId:s,dbName:a,email:"",fname:"",lname:"",postcode:""}})}componentDidUpdate(){if(this.state.modalOpen){const e=document.querySelector(".modal-wrapper");e&&setTimeout(()=>{e.classList.add("modal-active")},1e3)}}render(){let e=!1;if(!(0,g.get)(this,"props.rendering.dataSource",null))return"";const{SubscribeTitle:s=null,SubscribeDescription:a=null,SubscribeButton:t=null,EmailPlaceholder:c=null,SubscribeImageUrl:i=null,EmailPreferenceModalTitle:B=null,EmailPreferenceModalDescription:d=null,EmailPreferenceModalButton:u=null,Interests:A=null,FirstNameLabel:C=null,LastNameLabel:w=null,EmailLabel:I=null,PostcodeLabel:b=null,GenderGroupLabel:h=null,GenderOptions:k=null,Special:N=null}=this.props.fields||{},{RemoveDefaultMargin:j=""}=this.props.params||{},{ApplySmallMargin:S=""}=this.props.params||{},f=j&&"1"===j?"":S&&"1"===S?"small":"standard",{pageId:E,dbName:R,email:T,fname:Q,lname:x,postcode:O,fields:v}=this.state.formData||{},{message:J,error:H,modalOpen:D}=this.state||{},L={FirstNameLabel:C,LastNameLabel:w,EmailLabel:I,PostcodeLabel:b},P={fname:Q,lname:x,email:T,postcode:O};return(0,m.jsxs)(l.A,{margin:f,children:[(0,m.jsx)("div",{className:"d-block d-md-none pt-4"}),(0,m.jsx)("div",{className:"subscribe-wrapper ",children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsx)(p,{isSpecial:N&&N.value,subscribeProps:{SubscribeButton:t,SubscribeTitle:s,SubscribeDescription:a,EmailPlaceholder:c},state:{message:J,error:H,isSpecial:e,email:T},handleDetailsUpdate:e=>this.handleDetailsUpdate(e),subscribe:this.subscribe,SubscribeImageUrl:i}),D&&(0,m.jsx)("div",{className:"modal-wrapper",children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsx)("i",{className:"icon icon-close",onClick:this.handleOnClose}),v.length&&(0,m.jsxs)("div",{className:"modal-subscribe-form",children:[(0,m.jsx)("div",{className:"modal-subscribe-form__header",children:(0,m.jsx)(r.Text,{field:B})}),(0,m.jsx)("div",{className:"modal-subscribe-form-group-container",children:(0,m.jsx)(o.A,{fields:v,fieldsStates:P,setFields:this.updateFieldsState,fieldsLabels:L})})]}),(0,m.jsx)(n.A,{PageID:E,DBName:R,EmailAddress:T,FirstName:Q,LastName:x,Postcode:O,Description:d,ButtonName:u&&u.value?u.value:"Done",Interests:A,GenderDescription:h,GenderOptions:k,RadioGroupName:"Subscribe-Gender",IsModal:!0,EmailPreferenceResponse:(e,s,a)=>{this.handlePreferencesResponse(e,s,a)},Container:"subscribe-wrapper",Endpoint:"signup-subscribe"})]})})]})})]})}}const b=I}}]);
//# sourceMappingURL=Subscribe.f56bbc90.chunk.js.map