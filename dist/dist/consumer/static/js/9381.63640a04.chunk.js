"use strict";(self.webpackChunkconsumer=self.webpackChunkconsumer||[]).push([[4370,9381],{5233:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(69499),s=a(61995);class i extends r.Component{constructor(e){var t;super(e),t=this,this.handleScroll=()=>{this.setState({showDroplist:!1})},this.handleToggle=e=>{e.target.focus(),this.setState({showDroplist:!this.state.showDroplist})},this.handleBlur=e=>{this.state.showDroplist&&setTimeout(()=>{this.setState({showDroplist:!this.state.showDroplist})},250)},this.handleContainerClick=e=>{const t=e.target.classList.value,a=new RegExp("dropdown-btn"),r=new RegExp("dropdown-label"),s=new RegExp("icon"),i=a.test(t),l=r.test(t),n=s.test(t);i?e.target.click():l?e.target.querySelector("input").click():n&&e.target.previousElementSibling.click()},this.handleDropdownClick=(e,t)=>{const{onChange:a=null,relatedFieldsValues:r={}}=this.props||{},{id:s,HasRelatedField:i,RelatedFieldLabel:l,RelatedFieldCurrentValue:n,RelatedFieldRequired:o}=t;this.setState({selectValue:e.target.getAttribute("label"),relatedField:{selectedHasRelatedField:!1}}),i&&i.value&&this.setState({relatedField:{id:s&&s.value,selectedHasRelatedField:i&&i.value,relatedFieldLabel:l&&l.value,relatedFieldvalue:n&&n.value,relatedFieldRequired:o&&o.value}}),a&&(r[e.target.id]?a(`${e.target.id}+${this.props.relatedFieldsValues[e.target.id]}`,e.target):a(e.target.id,e.target,"dropdown"))},this.validateInput=e=>{let t=new RegExp(/^[a-z\xc0-\xff ,.'-]+$/i);if(e)return t.test(String(e).toLowerCase())},this.handleInputChange=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{onChange:r=null,setRelatedFieldsValues:s}=t.props||{},i={...t.props.relatedFieldsValues[e.target.id]};i[e.target.id.split("-")[0]]=e.target.value,t.props.setRelatedFieldsValues(i),a?t.validateInput(e.target.value)?(e.target.classList.remove("box-error"),r&&r(`${e.target.id}+${e.target.value}`,e.target)):e.target.classList.add("box-error"):r&&r(`${e.target.id}+${e.target.value}`,e.target)},this.state={showDroplist:!1,selectValue:null,relatedField:{id:null,selectedHasRelatedField:!1,relatedFieldLabel:null,relatedFieldvalue:null}}}componentDidMount(){window&&window.addEventListener("scroll",this.handleScroll)}componentDidUpdate(){const e=document.querySelector(".email-preference__options");e&&this.state.relatedField.selectedHasRelatedField&&(e.scrollTop=e.scrollHeight)}render(){const{data:e=null,placeholder:t=null,defaultValue:a=null,relatedFieldsValues:r=null}=this.props||{},{showDroplist:i,selectValue:l,relatedField:n}=this.state;return(0,s.jsx)("div",{className:"form-group form-dropdown",children:(0,s.jsxs)("div",{className:"dropdown-container",children:[(0,s.jsxs)("div",{className:"dropdown-label "+(i?"active":""),onClick:this.handleContainerClick,children:[(0,s.jsx)("input",{type:"button",value:l||(a||(t||"Select")),className:"dropdown-btn",onClick:this.handleToggle,onBlur:this.handleBlur}),(0,s.jsx)("i",{className:"icon icon-arrow-down"})]}),(0,s.jsx)("ul",{className:"dropdown-list",hidden:!i,children:e&&e.map((e,t)=>{const{Id:r=null,Name:i=null,Selected:n=null,HasRelatedField:o=null,RelatedFieldLabel:d=null,RelatedFieldCurrentValue:c=null,RelatedFieldRequired:p=null}=e.fields||{};return(0,s.jsxs)("li",{className:a==r.value&&null==l||l===i.value?"active":"",id:r.value,onClick:e=>this.handleDropdownClick(e,{id:r,HasRelatedField:o,RelatedFieldLabel:d,RelatedFieldCurrentValue:c,RelatedFieldRequired:p}),label:i.value,children:[(0,s.jsx)("i",{className:"icon icon-check"}),i.value]},`${i.value}-${i.id}-${t}-dropdown`)})}),n.selectedHasRelatedField&&(0,s.jsxs)("div",{className:"form-group related-field",children:[(0,s.jsx)("input",{id:n.id+"-dropdown-input",type:"text",className:"form-control form-control-lg related-field-input",onChange:e=>this.handleInputChange(e,n.relatedFieldRequired),onBlur:e=>this.handleInputChange(e,n.relatedFieldRequired),required:!0,value:r[n.id]}),(0,s.jsx)("label",{className:"form-control-placeholder",htmlFor:n.id+"-dropdown-input",children:n.relatedFieldLabel})]})]})})}}const l=i},9381:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(69499),s=a(43210),i=a.n(s),l=a(98558),n=a(61995);const o=e=>{const{className:t=null,id:a=null,name:r=null,uniqueKey:s=null,handleCheckboxClick:i=null,checked:l=!1}=e||{};return(0,n.jsx)("div",{className:"form-group form-checkbox",children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",className:`${t} ${l?"is-active":""}`,id:a,name:a,value:r,onClick:i}),r]})},s)};var d=a(5233);const c=e=>{const{data:t=null,onChange:a=null,RadioGroupName:s=null,setRelatedFieldsValues:i=null,relatedFieldsValues:l=null}=e||{};(0,r.useEffect)(()=>{let e={};t.forEach(t=>{const{Id:a=null,HasRelatedField:r=null,RelatedFieldCurrentValue:s={value:""}}=t.fields||{};r&&r.value&&(e[a.value]=s&&s.value)}),i(e)},[]);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={...l};r[e.target.id.split("-")[0]]=e.target.value,i(r),t?d(e.target.value)?(e.target.classList.remove("box-error"),a&&a(`${e.target.id}+${e.target.value}`,e.target)):e.target.classList.add("box-error"):a&&a(`${e.target.id}+${e.target.value}`,e.target)},d=e=>{let t=new RegExp(/^[a-z\xc0-\xff ,.'-]+$/i);if(e)return t.test(String(e).toLowerCase())};return(0,n.jsx)("div",{children:t&&t.map((e,t)=>{const{Id:r=null,Name:i=null,Selected:d=null,HasRelatedField:c=null,RelatedFieldLabel:p=null,RelatedFieldRequired:u=null}=e.fields||{};return(0,n.jsxs)("div",{className:"form-group form-radiobutton "+(c&&c.value?"has-related-field":""),children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",className:d&&!0===d.value?"is-active":"",id:r.value,name:s,value:i.value,onClick:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=document.body.querySelectorAll(".related-field-input");r.length&&r.forEach(a=>{a.id===e.target.id+"-input"?(a.parentElement.classList.add("is-active"),a.classList.add("is-active"),t&&a.classList.add("is-required")):(a.parentElement.classList.remove("is-active"),a.classList.remove("is-active"),t&&a.classList.remove("is-required"))}),a&&(l[e.target.id]?a(`${e.target.id}+${l[e.target.id]}`,e.target):a(e.target.id,e.target))}(e,u&&u.value)}),i.value]}),c&&c.value&&(0,n.jsxs)("div",{className:"form-group related-field",children:[(0,n.jsx)("input",{id:r.value+"-input",type:"text",className:"form-control form-control-lg related-field-input",onChange:e=>o(e,u&&u.value),onBlur:e=>o(e,u&&u.value),required:!0,value:l[r.value]}),(0,n.jsx)("label",{className:"form-control-placeholder",htmlFor:r.value+"-input",children:p&&p.value})]})]},`${i.value}-${i.id}-${t}-radiobutton`)})})};var p=a(31143),u=a(75178),h=a(33590),m=a.n(h);const f=e=>{let{interests:t,handleCheckboxClick:a}=e;return t.map((e,t)=>{const{Id:r=null,Name:s=null,Selected:i=null}=e.fields||{};return!(t>6)&&(0,n.jsx)("div",{className:"col-12 col-md-4",children:(0,n.jsx)(o,{id:r.value,name:s.value,checked:!(!i||!i.value)&&i.value,handleCheckboxClick:a})},`${s.value}-${r.value}-${t}`)})};class g extends r.Component{constructor(e){super(e),this.recaptchaLoaded=()=>{console.log("Successful Load Recaptcha"),this.setState({recaptchaLoaded:!0})},this.recaptchaExpired=()=>{this.setState({verifiedRecaptcha:!1,expiredRecaptcha:!0})},this.recaptchaVerifyResponse=e=>{e?this.setState({verifiedRecaptcha:!0,expiredRecaptcha:!1}):this.setState({verifiedRecaptcha:!1})},this.getSubscribeModule=e=>e.includes("subscribe")?"Subscription module":e.includes("footer")?"Footer module":"Sign up module",this.triggerActiveElement=()=>{const e=document.getElementsByClassName(`${this.props.Container?this.props.Container:"update-preferences"}`);if(e.length){let t=e[0].querySelectorAll(".form-checkbox .is-active"),a=e[0].querySelectorAll(".form-radiobutton .is-active");if(t.length>0)for(let e=0;e<t.length;e++)t[e].click();if(a.length>0)for(let e=0;e<a.length;e++)a[e].click()}},this.handleEmailPreference=async e=>{const{IsModal:t=!1,EmailPreferenceResponse:a=null,FirstName:r=null,LastName:s=null,EmailAddress:l=null,Postcode:n=null,ValidateFields:o={},EnableRecaptcha:d=!1,PrivacyPolicyText:c=null,OnSubmitted:p=null}=this.props||{},{pageId:u,dbName:h,emailAddress:f,interests:g,postcode:v}=this.state.preferenceFormData,b={pageId:u,dbName:h,emailAddress:f,postcode:v,interests:g},x=document.querySelector(".email-preference__button");x.classList.toggle("disabled");let y=!0;if(this.props.Endpoint.includes("signup")){if(l&&n||([l,n].forEach((e,t)=>{e||a(!1,{IsSuccessful:!1,Message:(t<1?"Email":"Postcode")+" is required",ApiResponse:t<1?2:5})}),y=!1),Object.values(o).some(e=>!0===e.error)&&(y=!1),d&&d.value&&!this.state.verifiedRecaptcha){y=!1;document.querySelector(".newsletter-wrapper > .modal-active > .container > .email-preference > .form-recaptcha").classList.add("is-required"),this.setState({...this.setState,expiredRecaptcha:!0})}b.firstName=r,b.lastName=s,b.emailAddress=l,b.postcode=n.toString()}else"updatepreference"===this.props.Endpoint&&(b.firstName=r,b.lastName=s);if(this.props.Endpoint.includes("signup")||"updatepreference"===this.props.Endpoint){let e=document.body.querySelector(".related-field-input.is-active.is-required");e&&(e.value||(y=!1,e.classList.add("box-error"),e.focus())),document.body.querySelector(".box-error")&&(y=!1),b.specifiedGender=this.state.preferenceFormData.specifiedGender}if(c){const e=document.body.querySelector("#privacy-checkbox");e&&!e.checked?(e.classList.add("is-error"),y=!1):e.classList.remove("is-error")}if(y){const e="/api/sitecore/subscription/"+(this.props.Endpoint.includes("signup")?"signup":"updatepreference");let r=await i()({method:"POST",url:e,data:b});if(r&&r.data)if(this.props.Endpoint.includes("signup")){if(a)if(0===r.data.ApiResponse||3===r.data.ApiResponse){let e,t=[],s=Object.entries(this.state.preferenceFormData.interests),i=Object.keys(this.state.genderList);for(let[a,r]of s)!0!==r||i.includes(a)||t.push(document.getElementById(a).value);if(""===this.state.preferenceFormData.specifiedGender){let t=Object.entries(this.state.genderList);for(let[a,r]of t)!0===r&&(e=document.getElementById(a).value)}else e=this.state.preferenceFormData.specifiedGender;m().dataLayer({dataLayer:{event:"subscribeSubmit",subscribeModule:this.getSubscribeModule(this.props.Endpoint),user:{details:{email:b.emailAddress,postcode:b.postcode,first_name:b.firstName,last_name:b.lastName,categories_interested_in:t.join(", "),gender:e}}},dataLayerName:"dataLayer"}),a(!0,r.data,!0),this.setState({...this.state,responseData:{...r.data}})}else 2===r.data.ApiResponse?(x.classList.toggle("disabled"),a(!1,r.data,!0)):(x.classList.toggle("disabled"),this.setState({...this.state,responseData:{...r.data}}));t||document.getElementsByTagName("body")[0].classList.remove("modal-open"),p()}else r.data.IsSuccessful?(a&&a(!0),document.getElementsByTagName("body")[0].classList.remove("modal-open"),p()):(console.error("Update preference failed",r.data),x.classList.remove("disabled"),this.setState({...this.state,responseData:{...r.data,ApiResponse:0}}))}else x.classList.toggle("disabled"),setTimeout(()=>{let e=document.body.querySelector(".box-error");e&&e.scrollIntoView({block:"center"})},250)},this.handlePreferencesUpdate=e=>{let t=this.state.preferenceFormData.interests,a=this.state.genderList,r="";for(var s in a)if(e.genderValue.includes("+")){let[i,l]=e.genderValue.split("+");r=l,i.includes("-")&&(i=i.split("-")[0]),i===s?(t[s]=!0,a[s]=!0):(t[s]=!1,a[s]=!1)}else e.genderValue===s?(t[s]=!0,a[s]=!0):(t[s]=!1,a[s]=!1),r="";if(this.setState({preferenceFormData:{...this.state.preferenceFormData,specifiedGender:r,interests:t},genderList:a}),!this.props.HideDropdown){const t=(0,p.default)(e.element,"email-preference");if(t){const a=t.querySelectorAll(`[id="${e.element.id}"]`);for(let t=0;t<a.length;t++){let r=a[t];r!==e.element&&r.click()}}}},this.handleCheckboxClick=e=>{let t=this.state.preferenceFormData.interests;const a=e.target.id,r=e.target.checked;t[a]=r,this.setState({preferenceFormData:{...this.state.preferenceFormData,interests:t}})},this.hanlePrivacyCheck=e=>{e.target.checked?e.target.classList.remove("is-error"):e.target.classList.add("is-error")},this.handleScroll=e=>{const t=e.target.querySelector(".dropdown-list");t&&t.setAttribute("hidden",!0)},this.renderModalMessage=e=>(0,n.jsxs)("div",{className:"modal-button-successmessage",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("path",{d:"M0 0h24v24H0z"}),(0,n.jsx)("path",{fill:"#307a53",d:"M9.23 18.317a.997.997 0 0 1-.759.346.997.997 0 0 1-.759-.346l-4.19-4.189a1 1 0 0 1 1.415-1.414l3.534 3.534L19.076 5.643a1 1 0 0 1 1.414 1.414L9.23 18.317z",stroke:"#307a53",strokeWidth:"2px"})]})}),(0,n.jsx)("label",{children:e.Message})]}),this.state={preferenceFormData:{pageId:this.props.PageID?this.props.PageID:"",dbName:this.props.DBName?this.props.DBName:"",emailAddress:this.props.EmailAddress?this.props.EmailAddress:"",postcode:this.props.Postcode?this.props.Postcode:"",interests:{},specifiedGender:""},genderList:{},verifiedRecaptcha:!1,expiredRecaptcha:!1,load:!1,recaptchaLoaded:!1,responseData:{IsSuccessful:!1,Message:"",ApiResponse:null},relatedFieldValues:{}}}componentDidMount(){const{Interests:e=null,GenderOptions:t=null}=this.props||{};let a={},r={},s="";e&&e.map((e,t)=>{const{Id:r=null,Name:s=null,Selected:i=null}=e.fields||{};let l=!(!i||!0!==i.value),n=r.value;a[n]=l}),t&&t.map((e,t)=>{const{Id:i=null,Name:l=null,Selected:n=null,RelatedFieldCurrentValue:o=null}=e.fields||{};let d=i.value,c=!(!n||!0!==n.value);a[d]=c,r[d]=c,o&&o.value&&(s=o.value)}),this.setState({...this.state,preferenceFormData:{...this.state.preferenceFormData,interests:a,specifiedGender:s},genderList:r},this.triggerActiveElement()),setTimeout(()=>{this.setState({load:!0})},1500)}componentDidUpdate(e){this.props.EmailAddress!==e.EmailAddress&&this.setState({...this.state,preferenceFormData:{...this.state.preferenceFormData,emailAddress:this.props.EmailAddress}});document.querySelector(".modal-button-successmessage")&&document.querySelector(".email-preference").scrollIntoView({behavior:"smooth",block:"end"})}render(){const{Title:e=null,Description:t=null,ButtonName:a=null,Interests:r=null,GenderDescription:s=null,GenderOptions:i=null,RadioGroupName:o=null,HideDropdown:p=!1,EnableRecaptcha:h=null,RecaptchaPublicKey:m=null,RecaptchaPrivateKey:g=null,PrivacyPolicyText:v=null}=this.props||{},{verifiedRecaptcha:b,expiredRecaptcha:x,load:y,responseData:R}=this.state;return(0,n.jsxs)("div",{className:"email-preference",children:[e&&e.value&&(0,n.jsx)("div",{className:"email-preference__header",children:(0,n.jsx)(l.Text,{field:e})}),(0,n.jsxs)("div",{className:"email-preference__options "+(p?"hide-dropdown":""),onScroll:this.handleScroll,children:[t&&t.value&&(0,n.jsx)("div",{className:"email-preference__description",children:(0,n.jsx)(l.Text,{field:t})}),(r||i)&&(0,n.jsxs)("div",{className:"email-preference__interests",children:[r&&(0,n.jsx)(f,{interests:r,handleCheckboxClick:this.handleCheckboxClick}),i&&(0,n.jsxs)("div",{className:"col-12 "+(p?"":"has-dropdown"),children:[s&&s.value&&(0,n.jsx)("div",{className:"email-preference__gender-description",children:(0,n.jsx)(l.Text,{field:s})}),(0,n.jsxs)("div",{className:"email-preference__gender-wrapper",children:[(0,n.jsx)(c,{RadioGroupName:o,data:i,onChange:(e,t)=>this.handlePreferencesUpdate({genderValue:e,element:t}),relatedFieldsValues:this.state.relatedFieldValues,setRelatedFieldsValues:e=>this.setState({relatedFieldValues:e})}),!p&&(0,n.jsx)(d.A,{data:i,placeholder:"Select Gender",onChange:(e,t)=>this.handlePreferencesUpdate({genderValue:e,element:t}),id:"email-pref-dropdown",relatedFieldsValues:this.state.relatedFieldValues,setRelatedFieldsValues:e=>this.setState({relatedFieldValues:e})})]})]})]})]}),y&&h&&h.value&&m&&m.value&&(0,n.jsxs)("div",{className:"form-group form-recaptcha "+(b?"verifiedRecaptcha ":" ")+(x?"is-required":" "),children:[(0,n.jsx)(u.A,{size:"normal",sitekey:m&&m.value?m.value:"6LeqAfYUAAAAAGK1oZ1NzfVUFeC4kqJOe16XklGg",onChange:this.recaptchaVerifyResponse,onExpired:this.recaptchaExpired,asyncScriptOnLoad:this.recaptchaLoaded}),(0,n.jsx)("div",{className:"form-control-validation",children:(0,n.jsx)("label",{className:"text-error",children:"ReCaptcha is required"})})]}),!!v&&(0,n.jsx)("div",{class:"form-group form-checkbox",children:(0,n.jsxs)("label",{class:"email-preference__privacy-checkbox",children:[(0,n.jsx)("input",{type:"checkbox",class:"",id:"privacy-checkbox",name:"privacy-checkbox",value:"agree",required:!0,onChange:this.hanlePrivacyCheck}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.RichText,{field:v}),(0,n.jsx)("label",{class:"text-message text-error",children:"Concent is required"})]})]})}),(0,n.jsxs)("div",{className:"email-preference__button-container "+(this.props.IsModal?"modal-button":""),children:[(0,n.jsx)("button",{className:"email-preference__button",onClick:e=>{this.handleEmailPreference(e)},children:a}),0===R.ApiResponse&&R.IsSuccessful&&this.props.IsModal&&(0,n.jsx)("div",{className:"success-message",children:this.renderModalMessage(R)})]}),0===R.ApiResponse&&!R.IsSuccessful&&(0,n.jsx)("div",{children:(0,n.jsx)("label",{className:"text-error",children:"Preference update failed, please check your details."})}),4===R.ApiResponse&&(0,n.jsx)("div",{children:(0,n.jsx)("label",{className:"text-error",children:R.Message})})]})}}const v=g},31143:(e,t,a)=>{function r(e,t){if(e)for(;(e=e.parentElement)&&!e.classList.contains(t););return e}a.r(t),a.d(t,{default:()=>r})},62283:(e,t,a)=>{var r=a(43015),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n={};function o(e){return r.isMemo(e)?l:n[e.$$typeof]||s}n[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n[r.Memo]=l;var d=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,a,r){if("string"!==typeof a){if(m){var s=h(a);s&&s!==m&&e(t,s,r)}var l=c(a);p&&(l=l.concat(p(a)));for(var n=o(t),f=o(a),g=0;g<l.length;++g){var v=l[g];if(!i[v]&&(!r||!r[v])&&(!f||!f[v])&&(!n||!n[v])){var b=u(a,v);try{d(t,v,b)}catch(x){}}}}return t}},75178:(e,t,a)=>{a.d(t,{A:()=>b});var r=a(69499),s=a(17824),i=a.n(s);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(this,arguments)}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){var t,a;function s(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(n(t)),t.handleErrored=t.handleErrored.bind(n(t)),t.handleChange=t.handleChange.bind(n(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(n(t)),t}a=e,(t=s).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=s.prototype;return i.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},i.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var e=this;return new Promise(function(t,a){e.executionResolve=t,e.executionReject=a,e.execute()})},i.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},i.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout(function(){document.body.removeChild(e)},5e3)},i.handleRecaptchaRef=function(e){this.captcha=e},i.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var a,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return r.createElement("div",l({},t,{ref:this.handleRecaptchaRef}))},s}(r.Component);o.displayName="ReCAPTCHA",o.propTypes={sitekey:i().string.isRequired,onChange:i().func,grecaptcha:i().object,theme:i().oneOf(["dark","light"]),type:i().oneOf(["image","audio"]),tabindex:i().number,onExpired:i().func,onErrored:i().func,size:i().oneOf(["compact","normal","invisible"]),stoken:i().string,hl:i().string,badge:i().oneOf(["bottomright","bottomleft","inline"])},o.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var d=a(62283),c=a.n(d);function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p.apply(this,arguments)}var u={},h=0;var m="onloadcallback";const f=(g=function(){return"https://"+(("undefined"!==typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+m+"&render=explicit"},v=(v={callbackName:m,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",a=function(t){var a,s;function i(e,a){var r;return(r=t.call(this,e,a)||this).state={},r.__scriptURL="",r}s=t,(a=i).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s;var l=i.prototype;return l.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+h++),this.__scriptLoaderID},l.setupScriptURL=function(){return this.__scriptURL="function"===typeof g?g():g,this.__scriptURL},l.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)})},l.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=u[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[v.callbackName]},l.componentDidMount=function(){var e=this,t=this.setupScriptURL(),a=this.asyncScriptLoaderGetScriptLoaderID(),r=v,s=r.globalName,i=r.callbackName,l=r.scriptId;if(s&&"undefined"!==typeof window[s]&&(u[t]={loaded:!0,observers:{}}),u[t]){var n=u[t];return n&&(n.loaded||n.errored)?void this.asyncScriptLoaderHandleLoad(n):void(n.observers[a]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var o={};o[a]=function(t){return e.asyncScriptLoaderHandleLoad(t)},u[t]={loaded:!1,observers:o};var d=document.createElement("script");for(var c in d.src=t,d.async=!0,v.attributes)d.setAttribute(c,v.attributes[c]);l&&(d.id=l);var p=function(e){if(u[t]){var a=u[t].observers;for(var r in a)e(a[r])&&delete a[r]}};i&&"undefined"!==typeof window&&(window[i]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),d.onload=function(){var e=u[t];e&&(e.loaded=!0,p(function(t){return!i&&(t(e),!0)}))},d.onerror=function(){var e=u[t];e&&(e.errored=!0,p(function(t){return t(e),!0}))},document.body.appendChild(d)},l.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===v.removeOnUnmount)for(var t=document.getElementsByTagName("script"),a=0;a<t.length;a+=1)t[a].src.indexOf(e)>-1&&t[a].parentNode&&t[a].parentNode.removeChild(t[a]);var r=u[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===v.removeOnUnmount&&delete u[e])},l.render=function(){var t=v.globalName,a=this.props,s=(a.asyncScriptOnLoad,a.forwardedRef),i=function(e,t){if(null==e)return{};var a,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}(a,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!==typeof window&&(i[t]="undefined"!==typeof window[t]?window[t]:void 0),i.ref=s,(0,r.createElement)(e,i)},i}(r.Component),s=(0,r.forwardRef)(function(e,t){return(0,r.createElement)(a,p({},e,{forwardedRef:t}))});return s.displayName="AsyncScriptLoader("+t+")",s.propTypes={asyncScriptOnLoad:i().func},c()(s,e)})(o);var g,v;const b=f}}]);
//# sourceMappingURL=9381.63640a04.chunk.js.map